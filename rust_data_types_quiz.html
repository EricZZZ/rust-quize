<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rust 基本数据类型快问快答</title>
    <link rel="stylesheet" href="quiz-styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🦀 Rust 基本数据类型快问快答</h1>
            <p>测试你对 Rust 基本数据类型和固定宽度数据类型的理解</p>
        </div>

        <div class="quiz-info">
            <div class="info-item">
                <div class="number">10</div>
                <div class="label">题目数量</div>
            </div>
            <div class="info-item">
                <div class="number">15</div>
                <div class="label">预计时间(分钟)</div>
            </div>
            <div class="info-item">
                <div class="number">⭐⭐</div>
                <div class="label">难度等级</div>
            </div>
        </div>

        <div class="content">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <!-- 题目1 -->
            <div class="question" data-question="1">
                <div class="question-number">第1题 (判断题)</div>
                <div class="question-text">
                    在Rust中，i32和u32都是32位整数类型，它们可以存储相同范围的数值。
                </div>
                <div class="options">
                    <div class="option" data-answer="false">正确</div>
                    <div class="option" data-answer="true">错误</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：错误</strong></p>
                    <p>i32是有符号32位整数，范围是-2,147,483,648到2,147,483,647。</p>
                    <p>u32是无符号32位整数，范围是0到4,294,967,295。</p>
                    <p>虽然都是32位，但存储的数值范围不同。</p>
                </div>
            </div>

            <!-- 题目2 -->
            <div class="question" data-question="2">
                <div class="question-number">第2题 (选择题)</div>
                <div class="question-text">
                    下列哪个不是Rust的基本整数类型？
                </div>
                <div class="options">
                    <div class="option" data-answer="false">i8</div>
                    <div class="option" data-answer="false">u64</div>
                    <div class="option" data-answer="true">i24</div>
                    <div class="option" data-answer="false">i128</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：i24</strong></p>
                    <p>Rust的基本整数类型包括：i8, i16, i32, i64, i128, isize和u8, u16, u32, u64, u128, usize。</p>
                    <p>没有i24这种类型，Rust只提供2的幂次方位数的整数类型。</p>
                </div>
            </div>

            <!-- 题目3 -->
            <div class="question" data-question="3">
                <div class="question-number">第3题 (选择题)</div>
                <div class="question-text">
                    在64位系统上，usize类型的大小是多少？
                </div>
                <div class="options">
                    <div class="option" data-answer="false">32位</div>
                    <div class="option" data-answer="true">64位</div>
                    <div class="option" data-answer="false">128位</div>
                    <div class="option" data-answer="false">取决于编译器</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：64位</strong></p>
                    <p>usize和isize的大小取决于目标架构的指针大小。</p>
                    <p>在64位系统上是64位，在32位系统上是32位。</p>
                    <p>它们主要用于数组索引和内存地址相关操作。</p>
                </div>
            </div>

            <!-- 题目4 -->
            <div class="question" data-question="4">
                <div class="question-number">第4题 (判断题)</div>
                <div class="question-text">
                    Rust中的char类型是8位的，可以存储ASCII字符。
                </div>
                <div class="options">
                    <div class="option" data-answer="false">正确</div>
                    <div class="option" data-answer="true">错误</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：错误</strong></p>
                    <p>Rust中的char类型是32位的Unicode标量值，不是8位。</p>
                    <p>它可以存储任何Unicode字符，包括emoji、中文等。</p>
                    <p>如果只需要存储ASCII字符，可以使用u8类型。</p>
                </div>
            </div>

            <!-- 题目5 -->
            <div class="question" data-question="5">
                <div class="question-number">第5题 (选择题)</div>
                <div class="question-text">
                    下面哪个代码会导致编译错误？
                </div>
                <div class="code-block">A: let x: u8 = 255;
B: let y: u8 = 256;
C: let z: i8 = -128;
D: let w: i8 = 127;</div>
                <div class="options">
                    <div class="option" data-answer="false">A</div>
                    <div class="option" data-answer="true">B</div>
                    <div class="option" data-answer="false">C</div>
                    <div class="option" data-answer="false">D</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：B</strong></p>
                    <p>u8类型的范围是0到255，256超出了这个范围。</p>
                    <p>A: 255是u8的最大值，合法。</p>
                    <p>C: -128是i8的最小值，合法。</p>
                    <p>D: 127是i8的最大值，合法。</p>
                </div>
            </div>

            <!-- 题目6 -->
            <div class="question" data-question="6">
                <div class="question-number">第6题 (简答题)</div>
                <div class="question-text">
                    Rust中有哪两种浮点数类型？请写出它们的名称。
                </div>
                <input type="text" class="text-input" placeholder="请输入答案，用逗号分隔" data-answer="f32,f64">
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：f32, f64</strong></p>
                    <p>f32是32位单精度浮点数，符合IEEE-754标准。</p>
                    <p>f64是64位双精度浮点数，也符合IEEE-754标准。</p>
                    <p>默认的浮点数类型是f64，因为现代CPU上f64和f32的性能差不多，但f64精度更高。</p>
                </div>
            </div>

            <!-- 题目7 -->
            <div class="question" data-question="7">
                <div class="question-number">第7题 (选择题)</div>
                <div class="question-text">
                    在Rust中，布尔类型bool占用多少字节的内存？
                </div>
                <div class="options">
                    <div class="option" data-answer="true">1字节</div>
                    <div class="option" data-answer="false">2字节</div>
                    <div class="option" data-answer="false">4字节</div>
                    <div class="option" data-answer="false">8字节</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：1字节</strong></p>
                    <p>虽然bool只需要1位来存储true/false，但由于内存对齐的原因，它占用1字节。</p>
                    <p>bool类型只有两个值：true和false。</p>
                    <p>可以使用std::mem::size_of::<bool>()来验证其大小。</p>
                </div>
            </div>

            <!-- 题目8 -->
            <div class="question" data-question="8">
                <div class="question-number">第8题 (判断题)</div>
                <div class="question-text">
                    在Rust中，数组的长度必须在编译时确定，不能在运行时动态改变。
                </div>
                <div class="options">
                    <div class="option" data-answer="true">正确</div>
                    <div class="option" data-answer="false">错误</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：正确</strong></p>
                    <p>Rust中的数组（array）长度是类型的一部分，必须在编译时确定。</p>
                    <p>例如：[i32; 5]和[i32; 10]是不同的类型。</p>
                    <p>如果需要动态大小的集合，应该使用Vec<T>。</p>
                </div>
            </div>

            <!-- 题目9 -->
            <div class="question" data-question="9">
                <div class="question-number">第9题 (选择题)</div>
                <div class="question-text">
                    下面哪个是正确的元组类型声明？
                </div>
                <div class="options">
                    <div class="option" data-answer="true">(i32, f64, bool)</div>
                    <div class="option" data-answer="false">[i32, f64, bool]</div>
                    <div class="option" data-answer="false">{i32, f64, bool}</div>
                    <div class="option" data-answer="false">&lt;i32, f64, bool&gt;</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：(i32, f64, bool)</strong></p>
                    <p>元组使用圆括号()来定义，可以包含不同类型的元素。</p>
                    <p>方括号[]用于数组，花括号{}用于结构体，尖括号<>用于泛型。</p>
                    <p>元组的元素可以通过.0, .1, .2等索引访问。</p>
                </div>
            </div>

            <!-- 题目10 -->
            <div class="question" data-question="10">
                <div class="question-number">第10题 (简答题)</div>
                <div class="question-text">
                    i128类型可以存储的最大正整数是多少？（用科学记数法表示，如1.23e10）
                </div>
                <input type="text" class="text-input" placeholder="请输入答案" data-answer="1.7e38">
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：约1.7e38</strong></p>
                    <p>i128的范围是-2^127到2^127-1。</p>
                    <p>最大值是2^127-1 = 170,141,183,460,469,231,731,687,303,715,884,105,727。</p>
                    <p>用科学记数法表示约为1.7 × 10^38。</p>
                    <p>这是一个非常大的数，足以处理大多数需要超大整数的场景。</p>
                </div>
            </div>

            <div class="text-center">
                <button class="btn" id="submitBtn" onclick="submitQuiz()">提交答案</button>
                <button class="btn" id="showAnswersBtn" onclick="showAllAnswers()" style="display: none;">查看所有解析</button>
                <button class="btn" id="restartBtn" onclick="restartQuiz()" style="display: none;">重新开始</button>
            </div>

            <div class="final-results" id="finalResults">
                <div class="result-icon" id="resultIcon">🎉</div>
                <div class="result-text" id="resultText">恭喜完成测验！</div>
                <div class="result-score" id="finalScore">10/10</div>
                <div id="resultMessage">你对Rust基本数据类型的掌握非常出色！</div>
            </div>
        </div>
    </div>

    <script>
        let userAnswers = {};
        let totalQuestions = 10;
        let quizSubmitted = false;

        // 处理选择题选项点击
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                if (quizSubmitted) return;
                
                const question = this.closest('.question');
                const questionNum = question.dataset.question;
                
                // 清除同一题目的其他选项
                question.querySelectorAll('.option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // 选中当前选项
                this.classList.add('selected');
                
                // 记录答案
                userAnswers[questionNum] = {
                    type: 'option',
                    answer: this.dataset.answer === 'true',
                    element: this
                };
                
                updateProgress();
            });
        });

        // 处理简答题输入
        document.querySelectorAll('.text-input').forEach(input => {
            input.addEventListener('input', function() {
                if (quizSubmitted) return;
                
                const question = this.closest('.question');
                const questionNum = question.dataset.question;
                
                userAnswers[questionNum] = {
                    type: 'text',
                    answer: this.value.trim(),
                    element: this
                };
                
                updateProgress();
            });
        });

        function submitQuiz() {
            if (Object.keys(userAnswers).length < totalQuestions) {
                alert('请完成所有题目后再提交！');
                return;
            }
            
            quizSubmitted = true;
            let correctCount = 0;
            
            // 检查答案并显示结果
            for (let questionNum in userAnswers) {
                const userAnswer = userAnswers[questionNum];
                const question = document.querySelector(`[data-question="${questionNum}"]`);
                const explanation = question.querySelector('.explanation');
                
                if (userAnswer.type === 'option') {
                    // 处理选择题
                    const isCorrect = userAnswer.answer;
                    if (isCorrect) {
                        correctCount++;
                        userAnswer.element.classList.add('correct');
                    } else {
                        userAnswer.element.classList.add('incorrect');
                        // 显示正确答案
                        question.querySelectorAll('.option').forEach(opt => {
                            if (opt.dataset.answer === 'true') {
                                opt.classList.add('correct');
                            }
                        });
                    }
                } else if (userAnswer.type === 'text') {
                    // 处理简答题（关键词匹配）
                    const userText = userAnswer.answer.toLowerCase();
                    
                    let isCorrect = false;
                    if (questionNum === '6') {
                        // 第6题：检查是否包含f32和f64
                        isCorrect = userText.includes('f32') && userText.includes('f64');
                    } else if (questionNum === '10') {
                        // 第10题：检查科学记数法
                        isCorrect = userText.includes('1.7e38') || userText.includes('1.70e38') || 
                                   userText.includes('170141183460469231731687303715884105727') ||
                                   Math.abs(parseFloat(userText) - 1.7e38) < 1e37;
                    }
                    
                    if (isCorrect) {
                        correctCount++;
                        userAnswer.element.style.borderColor = '#27ae60';
                        userAnswer.element.style.backgroundColor = '#d5f4e6';
                    } else {
                        userAnswer.element.style.borderColor = '#e74c3c';
                        userAnswer.element.style.backgroundColor = '#fdf2f2';
                    }
                }
                
                explanation.style.display = 'block';
            }
            
            // 显示最终结果
            showFinalResults(correctCount);
            
            // 更新按钮状态
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('showAnswersBtn').style.display = 'inline-block';
            document.getElementById('restartBtn').style.display = 'inline-block';
        }

        function showAllAnswers() {
            document.querySelectorAll('.explanation').forEach(explanation => {
                explanation.style.display = 'block';
            });
            
            document.getElementById('showAnswersBtn').style.display = 'none';
        }

        function restartQuiz() {
            // 重置所有变量
            userAnswers = {};
            quizSubmitted = false;
            
            // 清除所有选择和样式
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            document.querySelectorAll('.text-input').forEach(input => {
                input.value = '';
                input.style.borderColor = '';
                input.style.backgroundColor = '';
            });
            
            // 隐藏所有解释
            document.querySelectorAll('.explanation').forEach(explanation => {
                explanation.style.display = 'none';
            });
            
            // 重置结果显示
            document.getElementById('finalResults').style.display = 'none';
            
            // 重置按钮状态
            document.getElementById('submitBtn').style.display = 'inline-block';
            document.getElementById('showAnswersBtn').style.display = 'none';
            document.getElementById('restartBtn').style.display = 'none';
            
            // 更新显示
            updateProgress();
            
            // 滚动到顶部
            window.scrollTo(0, 0);
        }

        function updateProgress() {
            const answeredCount = Object.keys(userAnswers).length;
            const progress = (answeredCount / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function showFinalResults(correctCount) {
            const percentage = (correctCount / totalQuestions) * 100;
            const finalResults = document.getElementById('finalResults');
            const resultIcon = document.getElementById('resultIcon');
            const resultText = document.getElementById('resultText');
            const finalScore = document.getElementById('finalScore');
            const resultMessage = document.getElementById('resultMessage');
            
            finalScore.textContent = `${correctCount}/${totalQuestions} (${percentage.toFixed(1)}%)`;
            
            if (percentage >= 90) {
                resultIcon.textContent = '🏆';
                resultText.textContent = '优秀！';
                resultMessage.textContent = '你对Rust基本数据类型的掌握非常出色！';
            } else if (percentage >= 70) {
                resultIcon.textContent = '🎉';
                resultText.textContent = '良好！';
                resultMessage.textContent = '你对Rust基本数据类型有很好的理解！';
            } else if (percentage >= 60) {
                resultIcon.textContent = '👍';
                resultText.textContent = '及格！';
                resultMessage.textContent = '继续学习，你会掌握得更好！';
            } else {
                resultIcon.textContent = '📚';
                resultText.textContent = '需要加强';
                resultMessage.textContent = '建议复习Rust基本数据类型的相关知识。';
            }
            
            finalResults.classList.add('show');
        }

        // 初始化
        updateProgress();
    </script>
</body>
</html>