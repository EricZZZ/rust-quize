<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rust Crate 与模块快问快答</title>
    <link rel="stylesheet" href="quiz-styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🦀 Rust Crate 与模块快问快答</h1>
            <p>测试你对 Rust crate、模块系统和包管理的理解</p>
        </div>

        <div class="quiz-info">
            <div class="info-item">
                <div class="number">10</div>
                <div class="label">题目数量</div>
            </div>
            <div class="info-item">
                <div class="number">18</div>
                <div class="label">预计时间(分钟)</div>
            </div>
            <div class="info-item">
                <div class="number">⭐⭐⭐</div>
                <div class="label">难度等级</div>
            </div>
        </div>

        <div class="content">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <!-- 题目1 -->
            <div class="question" data-question="1">
                <div class="question-number">第1题 (判断题)</div>
                <div class="question-text">
                    在Rust中，一个crate可以包含多个模块，但一个模块不能跨越多个crate。
                </div>
                <div class="options">
                    <div class="option" data-answer="true">正确</div>
                    <div class="option" data-answer="false">错误</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：正确</strong></p>
                    <p>crate是Rust的编译单元，一个crate可以包含多个模块。</p>
                    <p>模块是crate内部的组织单元，不能跨越crate边界。</p>
                    <p>如果需要在多个crate之间共享代码，需要通过依赖关系来实现。</p>
                </div>
            </div>

            <!-- 题目2 -->
            <div class="question" data-question="2">
                <div class="question-number">第2题 (选择题)</div>
                <div class="question-text">
                    下列哪个关键字用于声明一个模块？
                </div>
                <div class="options">
                    <div class="option" data-answer="false">crate</div>
                    <div class="option" data-answer="true">mod</div>
                    <div class="option" data-answer="false">use</div>
                    <div class="option" data-answer="false">pub</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：mod</strong></p>
                    <p>mod关键字用于声明模块，例如：mod my_module { ... }</p>
                    <p>crate是编译单元的根，use用于引入项目，pub用于控制可见性。</p>
                    <p>模块可以是内联的（在同一文件中）或外部的（在单独文件中）。</p>
                </div>
            </div>

            <!-- 题目3 -->
            <div class="question" data-question="3">
                <div class="question-number">第3题 (选择题)</div>
                <div class="question-text">
                    在Cargo.toml文件中，[dependencies]部分用于指定什么？
                </div>
                <div class="options">
                    <div class="option" data-answer="false">项目的基本信息</div>
                    <div class="option" data-answer="true">外部依赖的crate</div>
                    <div class="option" data-answer="false">编译配置选项</div>
                    <div class="option" data-answer="false">测试配置</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：外部依赖的crate</strong></p>
                    <p>[dependencies]部分列出了项目所依赖的外部crate及其版本。</p>
                    <p>例如：serde = "1.0"表示依赖serde crate的1.0版本。</p>
                    <p>Cargo会自动下载和管理这些依赖。</p>
                </div>
            </div>

            <!-- 题目4 -->
            <div class="question" data-question="4">
                <div class="question-number">第4题 (判断题)</div>
                <div class="question-text">
                    默认情况下，Rust中的模块和函数都是私有的，需要使用pub关键字才能被外部访问。
                </div>
                <div class="options">
                    <div class="option" data-answer="true">正确</div>
                    <div class="option" data-answer="false">错误</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：正确</strong></p>
                    <p>Rust遵循"默认私有"原则，所有项目默认都是私有的。</p>
                    <p>只有显式使用pub关键字标记的项目才能被外部模块访问。</p>
                    <p>这有助于封装和信息隐藏，提高代码的安全性。</p>
                </div>
            </div>

            <!-- 题目5 -->
            <div class="question" data-question="5">
                <div class="question-number">第5题 (选择题)</div>
                <div class="question-text">
                    下面哪个use语句的语法是正确的？
                </div>
                <div class="code-block">A: use std::collections::HashMap;
B: import std::collections::HashMap;
C: include std::collections::HashMap;
D: require std::collections::HashMap;</div>
                <div class="options">
                    <div class="option" data-answer="true">A</div>
                    <div class="option" data-answer="false">B</div>
                    <div class="option" data-answer="false">C</div>
                    <div class="option" data-answer="false">D</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：A</strong></p>
                    <p>Rust使用use关键字来引入其他模块中的项目。</p>
                    <p>import、include、require是其他语言的关键字，在Rust中不存在。</p>
                    <p>use语句可以使用通配符(*)、重命名(as)等功能。</p>
                </div>
            </div>

            <!-- 题目6 -->
            <div class="question" data-question="6">
                <div class="question-number">第6题 (简答题)</div>
                <div class="question-text">
                    在Rust项目中，main.rs和lib.rs文件分别代表什么类型的crate？
                </div>
                <input type="text" class="text-input" placeholder="请输入答案，用逗号分隔" data-answer="binary,library">
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：binary crate, library crate</strong></p>
                    <p>main.rs是binary crate的入口点，用于创建可执行程序。</p>
                    <p>lib.rs是library crate的入口点，用于创建可被其他项目使用的库。</p>
                    <p>一个项目可以同时包含binary和library crate。</p>
                </div>
            </div>

            <!-- 题目7 -->
            <div class="question" data-question="7">
                <div class="question-number">第7题 (选择题)</div>
                <div class="question-text">
                    super关键字在模块系统中的作用是什么？
                </div>
                <div class="options">
                    <div class="option" data-answer="false">引用当前模块</div>
                    <div class="option" data-answer="true">引用父模块</div>
                    <div class="option" data-answer="false">引用根模块</div>
                    <div class="option" data-answer="false">引用子模块</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：引用父模块</strong></p>
                    <p>super关键字用于访问父模块中的项目，类似于文件系统中的".."。</p>
                    <p>self关键字引用当前模块，crate关键字引用根模块。</p>
                    <p>使用super可以避免写出完整的模块路径。</p>
                </div>
            </div>

            <!-- 题目8 -->
            <div class="question" data-question="8">
                <div class="question-number">第8题 (判断题)</div>
                <div class="question-text">
                    在Rust中，可以使用use语句将多个项目一次性引入，例如use std::collections::{HashMap, HashSet}。
                </div>
                <div class="options">
                    <div class="option" data-answer="true">正确</div>
                    <div class="option" data-answer="false">错误</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：正确</strong></p>
                    <p>Rust支持使用花括号{}来一次性引入多个项目。</p>
                    <p>这种语法可以减少重复的use语句，使代码更简洁。</p>
                    <p>也可以使用通配符*来引入模块中的所有公共项目。</p>
                </div>
            </div>

            <!-- 题目9 -->
            <div class="question" data-question="9">
                <div class="question-number">第9题 (选择题)</div>
                <div class="question-text">
                    下面哪个命令用于创建一个新的Rust项目？
                </div>
                <div class="options">
                    <div class="option" data-answer="false">cargo build</div>
                    <div class="option" data-answer="true">cargo new</div>
                    <div class="option" data-answer="false">cargo run</div>
                    <div class="option" data-answer="false">cargo init</div>
                </div>
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：cargo new</strong></p>
                    <p>cargo new用于创建一个全新的Rust项目，包含基本的目录结构和文件。</p>
                    <p>cargo init用于在现有目录中初始化Rust项目。</p>
                    <p>cargo build用于编译项目，cargo run用于运行项目。</p>
                </div>
            </div>

            <!-- 题目10 -->
            <div class="question" data-question="10">
                <div class="question-number">第10题 (简答题)</div>
                <div class="question-text">
                    在Cargo.toml中，如果要指定依赖serde的版本为1.0以上但小于2.0，应该如何写版本号？
                </div>
                <input type="text" class="text-input" placeholder="请输入版本号格式" data-answer="^1.0">
                <div class="explanation">
                    <h4>答案解析：</h4>
                    <p><strong>答案：^1.0 或 1.0</strong></p>
                    <p>^1.0表示兼容1.0版本，允许1.0.x到1.x.x的版本，但不包括2.0。</p>
                    <p>这是Cargo的默认版本策略，遵循语义化版本控制。</p>
                    <p>也可以使用~1.0（只允许1.0.x）或=1.0（精确版本）等格式。</p>
                </div>
            </div>

            <div class="text-center">
                <button class="btn" id="submitBtn" onclick="submitQuiz()">提交答案</button>
                <button class="btn" id="showAnswersBtn" onclick="showAllAnswers()" style="display: none;">查看所有解析</button>
                <button class="btn" id="restartBtn" onclick="restartQuiz()" style="display: none;">重新开始</button>
            </div>

            <div class="final-results" id="finalResults">
                <div class="result-icon" id="resultIcon">🎉</div>
                <div class="result-text" id="resultText">恭喜完成测验！</div>
                <div class="result-score" id="finalScore">10/10</div>
                <div id="resultMessage">你对Rust crate与模块系统的掌握非常出色！</div>
            </div>
        </div>
    </div>

    <script>
        let userAnswers = {};
        let totalQuestions = 10;
        let quizSubmitted = false;

        // 处理选择题选项点击
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                if (quizSubmitted) return;
                
                const question = this.closest('.question');
                const questionNum = question.dataset.question;
                
                // 清除同一题目的其他选项
                question.querySelectorAll('.option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // 选中当前选项
                this.classList.add('selected');
                
                // 记录答案
                userAnswers[questionNum] = {
                    type: 'option',
                    answer: this.dataset.answer === 'true',
                    element: this
                };
                
                updateProgress();
            });
        });

        // 处理简答题输入
        document.querySelectorAll('.text-input').forEach(input => {
            input.addEventListener('input', function() {
                if (quizSubmitted) return;
                
                const question = this.closest('.question');
                const questionNum = question.dataset.question;
                
                userAnswers[questionNum] = {
                    type: 'text',
                    answer: this.value.trim(),
                    element: this
                };
                
                updateProgress();
            });
        });

        function submitQuiz() {
            if (Object.keys(userAnswers).length < totalQuestions) {
                alert('请完成所有题目后再提交！');
                return;
            }
            
            quizSubmitted = true;
            let correctCount = 0;
            
            // 检查答案并显示结果
            for (let questionNum in userAnswers) {
                const userAnswer = userAnswers[questionNum];
                const question = document.querySelector(`[data-question="${questionNum}"]`);
                const explanation = question.querySelector('.explanation');
                
                if (userAnswer.type === 'option') {
                    // 处理选择题
                    const isCorrect = userAnswer.answer;
                    if (isCorrect) {
                        correctCount++;
                        userAnswer.element.classList.add('correct');
                    } else {
                        userAnswer.element.classList.add('incorrect');
                        // 显示正确答案
                        question.querySelectorAll('.option').forEach(opt => {
                            if (opt.dataset.answer === 'true') {
                                opt.classList.add('correct');
                            }
                        });
                    }
                } else if (userAnswer.type === 'text') {
                    // 处理简答题（关键词匹配）
                    const userText = userAnswer.answer.toLowerCase();
                    
                    let isCorrect = false;
                    if (questionNum === '6') {
                        // 第6题：检查是否包含binary和library相关词汇
                        isCorrect = (userText.includes('binary') || userText.includes('可执行') || userText.includes('程序')) && 
                                   (userText.includes('library') || userText.includes('库') || userText.includes('lib'));
                    } else if (questionNum === '10') {
                        // 第10题：检查版本号格式
                        isCorrect = userText.includes('^1.0') || userText.includes('1.0') || 
                                   userText.includes('^1') || userText === '1';
                    }
                    
                    if (isCorrect) {
                        correctCount++;
                        userAnswer.element.style.borderColor = '#27ae60';
                        userAnswer.element.style.backgroundColor = '#d5f4e6';
                    } else {
                        userAnswer.element.style.borderColor = '#e74c3c';
                        userAnswer.element.style.backgroundColor = '#fdf2f2';
                    }
                }
                
                explanation.style.display = 'block';
            }
            
            // 显示最终结果
            showFinalResults(correctCount);
            
            // 更新按钮状态
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('showAnswersBtn').style.display = 'inline-block';
            document.getElementById('restartBtn').style.display = 'inline-block';
        }

        function showAllAnswers() {
            document.querySelectorAll('.explanation').forEach(explanation => {
                explanation.style.display = 'block';
            });
            
            document.getElementById('showAnswersBtn').style.display = 'none';
        }

        function restartQuiz() {
            // 重置所有变量
            userAnswers = {};
            quizSubmitted = false;
            
            // 清除所有选择和样式
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            document.querySelectorAll('.text-input').forEach(input => {
                input.value = '';
                input.style.borderColor = '';
                input.style.backgroundColor = '';
            });
            
            // 隐藏所有解释
            document.querySelectorAll('.explanation').forEach(explanation => {
                explanation.style.display = 'none';
            });
            
            // 重置结果显示
            document.getElementById('finalResults').style.display = 'none';
            
            // 重置按钮状态
            document.getElementById('submitBtn').style.display = 'inline-block';
            document.getElementById('showAnswersBtn').style.display = 'none';
            document.getElementById('restartBtn').style.display = 'none';
            
            // 更新显示
            updateProgress();
            
            // 滚动到顶部
            window.scrollTo(0, 0);
        }

        function updateProgress() {
            const answeredCount = Object.keys(userAnswers).length;
            const progress = (answeredCount / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function showFinalResults(correctCount) {
            const percentage = (correctCount / totalQuestions) * 100;
            const finalResults = document.getElementById('finalResults');
            const resultIcon = document.getElementById('resultIcon');
            const resultText = document.getElementById('resultText');
            const finalScore = document.getElementById('finalScore');
            const resultMessage = document.getElementById('resultMessage');
            
            finalScore.textContent = `${correctCount}/${totalQuestions} (${percentage.toFixed(1)}%)`;
            
            if (percentage >= 90) {
                resultIcon.textContent = '🏆';
                resultText.textContent = '优秀！';
                resultMessage.textContent = '你对Rust crate与模块系统的掌握非常出色！';
            } else if (percentage >= 70) {
                resultIcon.textContent = '🎉';
                resultText.textContent = '良好！';
                resultMessage.textContent = '你对Rust crate与模块系统有很好的理解！';
            } else if (percentage >= 50) {
                resultIcon.textContent = '📚';
                resultText.textContent = '继续努力！';
                resultMessage.textContent = '建议复习Rust crate与模块系统的相关知识。';
            } else {
                resultIcon.textContent = '💪';
                resultText.textContent = '加油！';
                resultMessage.textContent = '多练习Rust crate与模块系统，你会进步很快的！';
            }
            
            finalResults.style.display = 'block';
            finalResults.scrollIntoView({ behavior: 'smooth' });
        }

        // 初始化进度条
        updateProgress();
    </script>
</body>
</html>